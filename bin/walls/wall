#!/bin/sh

# shellcheck disable=SC2120
random() {
	# http://www.shelldorado.com/scripts/cmds/rand.txt
	# https://redhat-list.redhat.narkive.com/SgF1Xkvk/how-to-generate-a-random-number-using-a-posix-shell
	# usage: random "END"
	MAX=$(( 1 << 62 - 1 ))
	END=${1:-$MAX}
	# shellcheck disable=SC2016
	HEX=$(head -c 8 /dev/urandom | # get random data
		od -t x1 | # turn it into hex
		sed -n '$q;p' | # remove last line
		cut -d ' ' -f 2- | # remove offsets
		tr -d ' ' | # combine into a single line
		tail -c 16) # remove 1st hex character to prevent overflow
	DIGIT=$(( 0x$HEX % END ))
	echo $DIGIT
}

COLOR='#282828'
INTERVAL=60
WALL_DIR="$HOME/pictures/walls"

case $1 in
	'skeen')
		WALL_DIR="$WALL_DIR/skeen";;
	'solid')
		hsetroot -solid "$COLOR"
		exit 0;;
esac

while true; do
	# pick a random wallpaper from the directory
	hsetroot -extend 
	sleep $INTERVAL
done
